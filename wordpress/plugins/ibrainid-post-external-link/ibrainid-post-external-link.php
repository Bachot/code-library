<?php/** Plugin Name: ibrainiD External Link* Description: Create post with a button that redirect to an external link* Version: 1.0* Author: Bachot Mpunga* Author URI: www.bachotdesign.com* License: GPLv2 or later*//*This program is free software; you can redistribute it and/ormodify it under the terms of the GNU General Public Licenseas published by the Free Software Foundation; either version 2of the License, or (at your option) any later version.This program is distributed in the hope that it will be useful,but WITHOUT ANY WARRANTY; without even the implied warranty ofMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See theGNU General Public License for more details.You should have received a copy of the GNU General Public Licensealong with this program; if not, write to the Free SoftwareFoundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA. Copyright 2017 IbrainiD.*//********************** ======================== ******************************//********************** ==== External Links ==== ******************************//********************** ======================== ******************************/include( plugin_dir_path( __FILE__ ) . 'ibrainid-custom-post-type.php');include( plugin_dir_path( __FILE__ ) . 'ibrainid-metaboxes.php');include( plugin_dir_path( __FILE__ ) . 'ibrainid-settings.php');function ibrainid_link($cat, $cssclass, $imgsize, $buttontext) {	$args = array( 			'post_type' => 'ibrainid_link', 			'posts_per_page' => 10,			'tax_query'   => array(					array(						'taxonomy' => 'ibrainid_link_category',						'field'    => 'slug',						'terms'    => $cat					)				)			);	$loop = new WP_Query( $args );		echo "<div class='ibr-download-container {$cssclass}'>";		while ( $loop->have_posts() ) : $loop->the_post();		$tit = wp_trim_words( get_the_title(), 4, '...');		$ibr_link =  get_post_meta(get_the_ID(), "_urllink", true);					echo "<div class='ibr-download-item'>";				echo "<div class='ibr-item-inner'>";					echo "<div class='ibr-image'>";						if ( has_post_thumbnail() ) {							the_post_thumbnail( $imgsize );						}					echo "</div>";					echo "<div class='ibr-content'>";						if ($tit) { echo "<h3>{$tit}</h3>"; }						"<p>".the_excerpt()."</p>";						if ($ibr_link) { echo "<a class='ibr-btn' href='{$ibr_link}' target='_blank'>{$buttontext}</a>"; }					echo "</div>";				echo "</div>";			echo "</div>";	endwhile;	echo "</div>"; //Every 2 items wrap	echo "</div>"; //Main container wrap}// [ibrlink category="ebook" class="" imgsize="" butttontext="More" ]function ibrainid_link_shortcode( $atts ) {    $a = shortcode_atts( array(        'category' => '',        'class' => 'my-class',		'imgsize' => 'thumbnail',		'buttontext' => 'Read',    ), $atts );	ibrainid_link($a['category'], $a['class'], $a['imgsize'], $a['buttontext']);}add_shortcode( 'ibrlink', 'ibrainid_link_shortcode' );